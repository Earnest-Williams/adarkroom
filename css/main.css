/* Fonts */
body, .tooltip, select.menuBtn {
        font-family: "Georgia", "Times New Roman", serif;
        font-size: 17px;
        font-weight: normal;
        line-height: 1.7;
        letter-spacing: 0.02em;
        text-rendering: optimizeLegibility;
}

:root {
        color-scheme: dark;
        --layout-max-width: 960px;
        --layout-padding: 32px;
        --layout-gap: 28px;
        --notifications-width: 220px;
        --notifications-radius: 16px;
}

@media (max-width: 1100px) {
        :root {
                --layout-padding: 26px;
                --layout-gap: 24px;
                --notifications-width: 200px;
        }
}

html {
	height: 100%;
}

body {
        --scene-bg: #1b120a;
        --scene-bg-secondary: #050301;
        --scene-glow: rgba(255, 164, 82, 0.28);
        --scene-room-bg: #1b120a;
        --scene-room-bg-secondary: #050301;
        --scene-room-glow: rgba(255, 164, 82, 0.28);
        --scene-outside-bg: #081712;
        --scene-outside-bg-secondary: #010504;
        --scene-outside-glow: rgba(88, 172, 118, 0.22);
        --scene-path-bg: #211209;
        --scene-path-bg-secondary: #060201;
        --scene-path-glow: rgba(202, 143, 76, 0.22);
        --scene-world-bg: #16110d;
        --scene-world-bg-secondary: #040302;
        --scene-world-glow: rgba(230, 184, 116, 0.16);
        --scene-ship-bg: #111820;
        --scene-ship-bg-secondary: #05080c;
        --scene-ship-glow: rgba(116, 166, 212, 0.2);
        --scene-space-bg: #040817;
        --scene-space-bg-secondary: #01030b;
        --scene-space-glow: rgba(114, 146, 218, 0.28);
        --scene-fabricator-bg: #141a1f;
        --scene-fabricator-bg-secondary: #040709;
        --scene-fabricator-glow: rgba(132, 209, 255, 0.18);
        --theme-accent: #f2ac63;
        --theme-accent-strong: #ffd194;
        --theme-accent-soft: rgba(242, 172, 99, 0.35);
        --surface-bg: rgba(26, 22, 19, 0.88);
        --surface-border: rgba(240, 206, 160, 0.35);
        --surface-border-strong: rgba(240, 206, 160, 0.75);
        --surface-shadow: rgba(8, 6, 5, 0.65);
        --text-primary: #f3e6d2;
        --text-secondary: rgba(243, 230, 210, 0.75);
        --text-invert: #150c05;
        --disabled-surface: rgba(87, 70, 55, 0.55);
        --disabled-text: rgba(243, 230, 210, 0.3);
        --status-bg: rgba(0, 0, 0, 0.32);
        height: 100%;
        margin: 0;
        padding: 48px 0 64px;
        background: radial-gradient(circle at 16% 18%, var(--scene-glow) 0%, transparent 55%),
                radial-gradient(circle at 78% 82%, var(--theme-accent-soft) 0%, transparent 60%),
                linear-gradient(170deg, var(--scene-bg) 0%, var(--scene-bg-secondary) 100%);
        color: var(--text-primary);
        transition: background 600ms ease, color 300ms ease;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100%;
}

@media (max-width: 1100px) {
        body {
                padding: 36px 0 54px;
        }
}

body.theme-magic {
        --scene-room-bg: #2b1740;
        --scene-room-bg-secondary: #0a0417;
        --scene-room-glow: rgba(217, 129, 255, 0.35);
        --scene-outside-bg: #102b2f;
        --scene-outside-bg-secondary: #030f13;
        --scene-outside-glow: rgba(82, 196, 223, 0.32);
        --scene-path-bg: #261943;
        --scene-path-bg-secondary: #080318;
        --scene-path-glow: rgba(199, 130, 255, 0.32);
        --scene-world-bg: #1b2345;
        --scene-world-bg-secondary: #050a1a;
        --scene-world-glow: rgba(148, 198, 255, 0.28);
        --scene-ship-bg: #14223b;
        --scene-ship-bg-secondary: #040b17;
        --scene-ship-glow: rgba(120, 205, 255, 0.32);
        --scene-space-bg: #050a2d;
        --scene-space-bg-secondary: #030519;
        --scene-space-glow: rgba(150, 170, 255, 0.38);
        --scene-fabricator-bg: #15243d;
        --scene-fabricator-bg-secondary: #040b16;
        --scene-fabricator-glow: rgba(126, 215, 255, 0.32);
        --theme-accent: #c58dff;
        --theme-accent-strong: #ddb5ff;
        --theme-accent-soft: rgba(197, 141, 255, 0.4);
        --surface-bg: rgba(35, 22, 53, 0.9);
        --surface-border: rgba(199, 155, 255, 0.35);
        --surface-border-strong: rgba(199, 155, 255, 0.75);
        --surface-shadow: rgba(7, 3, 15, 0.7);
        --text-primary: #f3ebff;
        --text-secondary: rgba(243, 235, 255, 0.7);
        --text-invert: #160b25;
        --disabled-surface: rgba(84, 61, 118, 0.55);
        --disabled-text: rgba(243, 235, 255, 0.35);
        --status-bg: rgba(8, 5, 18, 0.55);
}

body.scene-room {
        --scene-bg: var(--scene-room-bg);
        --scene-bg-secondary: var(--scene-room-bg-secondary);
        --scene-glow: var(--scene-room-glow);
}

body.scene-outside {
        --scene-bg: var(--scene-outside-bg);
        --scene-bg-secondary: var(--scene-outside-bg-secondary);
        --scene-glow: var(--scene-outside-glow);
}

body.scene-path {
        --scene-bg: var(--scene-path-bg);
        --scene-bg-secondary: var(--scene-path-bg-secondary);
        --scene-glow: var(--scene-path-glow);
}

body.scene-world {
        --scene-bg: var(--scene-world-bg);
        --scene-bg-secondary: var(--scene-world-bg-secondary);
        --scene-glow: var(--scene-world-glow);
}

body.scene-ship {
        --scene-bg: var(--scene-ship-bg);
        --scene-bg-secondary: var(--scene-ship-bg-secondary);
        --scene-glow: var(--scene-ship-glow);
}

body.scene-space {
        --scene-bg: var(--scene-space-bg);
        --scene-bg-secondary: var(--scene-space-bg-secondary);
        --scene-glow: var(--scene-space-glow);
}

body.scene-fabricator {
        --scene-bg: var(--scene-fabricator-bg);
        --scene-bg-secondary: var(--scene-fabricator-bg-secondary);
        --scene-glow: var(--scene-fabricator-glow);
}

::selection {
	background-color: transparent;
}

::-moz-selection {
	background-color: transparent;
}

#description textarea::selection {
	background-color: gray;
}

#description textarea::-moz-selection {
	background-color: gray;
}

/* Framework stuff */

div.clear {
	clear: both;
}

div#wrapper {
        margin: 0 auto;
        width: min(
                calc(700px + var(--notifications-width) + var(--layout-gap) + (var(--layout-padding) * 2)),
                calc(100vw - 32px)
        );
        min-width: calc(700px + var(--notifications-width) + var(--layout-gap) + (var(--layout-padding) * 2));
        padding: var(--layout-padding);
        position: relative;
        background: linear-gradient(165deg, rgba(31, 26, 22, 0.9) 0%, rgba(15, 11, 9, 0.92) 100%);
        border: 1px solid var(--surface-border);
        border-radius: 24px;
        box-shadow: 0 26px 70px rgba(0, 0, 0, 0.55);
        backdrop-filter: blur(14px);
        display: grid;
        grid-template-columns: var(--notifications-width) minmax(700px, 1fr);
        column-gap: var(--layout-gap);
        row-gap: var(--layout-gap);
        align-items: start;
}

div#saveNotify {
        position: fixed;
        top: 16px;
        right: 24px;
        background: linear-gradient(180deg, rgba(33, 26, 21, 0.95) 0%, rgba(18, 13, 10, 0.92) 100%);
        color: var(--text-primary);
        border: 1px solid var(--surface-border-strong);
        border-radius: 12px;
        box-shadow: 0 18px 45px rgba(0, 0, 0, 0.45);
        opacity: 0;
        padding: 10px 18px;
        font-size: 14px;
        letter-spacing: 0.03em;
        backdrop-filter: blur(10px);
        z-index: 20;
}

div#content {
        position: relative;
        overflow: hidden;
        height: 700px;
        color: var(--text-primary);
        border-radius: 18px;
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.04), 0 18px 45px rgba(0, 0, 0, 0.45);
        grid-column: 2;
        grid-row: 1;
}

div#header {
        padding-bottom: 20px;
        height: 20px;
}

.logo {
  position: fixed;
  left: 10px;
  bottom: 0;
  z-index: 10;
}

.logo-icon {
  height: 40px;
}

.logo-icon > path {
  stroke: var(--theme-accent-strong);
}

.menu {
        position: fixed;
        right: 10px;
        bottom: 10px;
        color: var(--text-secondary);
        z-index: 10;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.35);
}

.menu span {
        cursor: pointer;
        float: right;
        margin-left: 20px;
        color: inherit;
        transition: color 200ms ease;
}

.menu .menuBtn:hover,
.menu span:hover {
        color: var(--theme-accent-strong);
        text-decoration: none;
}

.customSelect {
	height: 20px;
}

span.customSelectOptions {
	margin: 0;
	width: 120px;
}

.customSelectOptions > ul {
	max-height: 20px;
	width: 120px;
	overflow: hidden;
	-webkit-transition: max-height 1s;
	transition: max-height 1s;
	padding: 0;
	margin: 0;
	bottom: 0;
	position: absolute;
	right: 0;
}

.customSelectOptions > ul:hover {
	max-height: 600px;
}

.customSelectOptions > ul > li {
	padding: 0 0 3px 0;
	list-style-type: none;
	height: 20px;
}

.customSelectOptions > ul > li:last-child {
	padding: 0;
}

.customSelectOptions > ul > li:hover {
	text-decoration: underline;
}

.customSelectOptions > ul > li:first-child:hover {
	cursor: default;
	text-decoration: none;
}

.menu span:hover {
	text-decoration: underline;
}

.menu .appStore {
	font-weight: bold;
}

div.headerButton {
        font-size: 17px;
        cursor: pointer;
        float: left;
        border-left: 1px solid var(--surface-border);
        margin-left: 10px;
        padding-left: 10px;
        color: var(--text-secondary);
        transition: color 200ms ease;
}

div.headerButton:hover {
        text-decoration: none;
        color: var(--theme-accent-strong);
}

div.headerButton:first-child {
	border-left: none;
	margin-left: 0px;
	padding-left: 0px;
}

div.headerButton.selected, div.headerButton.selected:hover {
        cursor: default;
        text-decoration: underline;
        color: var(--theme-accent-strong);
}

div#outerSlider {
	position: absolute;
}

div#outerSlider > div {
        position: relative;
        float: left;
        width: 700px;
        height: 700px;
        overflow: hidden;
}

div#locationSlider {
        position: absolute;
}

div.location {
        position: relative;
        float: left;
        width: 700px;
        min-height: 100%;
        box-sizing: border-box;
        background-color: var(--surface-bg);
        background-image: linear-gradient(180deg, rgba(255, 255, 255, 0.02) 0%, rgba(0, 0, 0, 0.35) 100%);
        border: 1px solid var(--surface-border);
        border-radius: 12px;
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.02), 0 15px 30px rgba(0, 0, 0, 0.35);
        color: var(--text-primary);
}

div.row_key {
	clear: both;
	float: left;
}

div.row_val {
	float: right;
}

div.total {
	font-weight: bold;
}

/* Notifications */

div#notifications {
        position: relative;
        top: auto;
        left: auto;
        width: var(--notifications-width);
        padding: 18px 20px 24px;
        overflow: hidden;
        color: var(--text-secondary);
        border-radius: var(--notifications-radius);
        border: 1px solid rgba(240, 206, 160, 0.28);
        background: linear-gradient(180deg, rgba(18, 14, 11, 0.9) 0%, rgba(15, 10, 7, 0.85) 100%);
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.03), 0 20px 45px rgba(0, 0, 0, 0.45);
        display: flex;
        flex-direction: column;
        gap: 12px;
        backdrop-filter: blur(12px);
        grid-column: 1;
        align-self: stretch;
        min-height: 100%;
        max-height: 700px;
        height: 100%;
        grid-row: 1;
}

div#notifications div.notification {
        position: relative;
        margin: 0;
        padding: 10px 8px 10px 16px;
        border-left: 3px solid rgba(242, 172, 99, 0.35);
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.02);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.25);
        color: var(--text-secondary);
        line-height: 1.6;
        font-size: 15px;
}

div#notifications div.notification:first-child {
        border-left-color: var(--theme-accent);
        color: var(--text-primary);
        background: rgba(242, 172, 99, 0.12);
}

div#notifyGradient {
        position: absolute;
        inset: 0;
        border-radius: var(--notifications-radius);
        background: linear-gradient(
                180deg,
                rgba(0, 0, 0, 0) 0%,
                rgba(10, 7, 5, 0.8) 92%,
                rgba(10, 7, 5, 0.95) 100%
        );
        pointer-events: none;
}

/* Button */

div.button {
        position: relative;
        text-align: center;
        border: 1px solid var(--surface-border-strong);
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.05) 0%, rgba(0, 0, 0, 0.45) 100%);
        color: var(--text-primary);
        border-radius: 12px;
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.45);
        width: 100px;
        margin-bottom: 8px;
        padding: 8px 12px;
        cursor: pointer;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        transition: transform 150ms ease, box-shadow 250ms ease, color 200ms ease, border-color 200ms ease;
        backdrop-filter: blur(6px);
}

div.button:hover {
        text-decoration: none;
        color: var(--theme-accent-strong);
        border-color: rgba(242, 172, 99, 0.65);
        box-shadow: 0 16px 34px rgba(0, 0, 0, 0.55);
        transform: translateY(-2px);
}

div.button.disabled, div.button.disabled:hover {
        cursor: default;
        border-color: var(--disabled-surface);
        background: linear-gradient(180deg, rgba(90, 72, 56, 0.6) 0%, rgba(63, 48, 38, 0.6) 100%);
        color: var(--disabled-text);
        text-decoration: none;
        box-shadow: none;
        transform: none;
}

div.button:focus-visible {
        outline: 2px solid var(--theme-accent-strong);
        outline-offset: 3px;
}

div.button:active {
        transform: translateY(0);
        box-shadow: 0 12px 28px rgba(0, 0, 0, 0.45);
}

div.button div.cooldown {
        position: absolute;
        top: 0px;
        left: 0px;
        z-index: -1;
        height: 100%;
        background-color: var(--theme-accent-soft);
}

/* Up/Down buttons. They're complicated! */

.upBtn, .dnBtn, .upManyBtn, .dnManyBtn {
	position: absolute;
	width: 14px;
	height: 12px;
	cursor: pointer;
}

.upBtn, .dnBtn {
	right: 0px;
}

.upManyBtn, .dnManyBtn {
	right: -15px;
}

.upBtn.disabled, .dnBtn.disabled, .upManyBtn.disabled, .dnManyBtn.disabled {
	cursor: default;
}

.upBtn {
	top: -3px;
}

.upManyBtn {
	top: -3px;
}

.upBtn:after, .upBtn:before, .upManyBtn:after, .upManyBtn:before {
	position: absolute;
	border: medium solid transparent;
	content: " ";
	height: 0;
	width: 0;
	bottom: 2px;
}

.upBtn:after, .upManyBtn:after {
        border-color: transparent transparent var(--text-primary);
}

.upBtn:before, .upManyBtn:before {
        border-color: transparent transparent var(--surface-border-strong);
}

.upBtn.disabled:before, .upManyBtn.disabled:before {
        border-color: transparent transparent var(--disabled-text);
}


.dnBtn {
	bottom: -3px;
}

.dnManyBtn {
	bottom: -3px;
}

.dnBtn:after, .dnBtn:before, .dnManyBtn:after, .dnManyBtn:before {
	position: absolute;
	border: medium solid transparent;
	content: " ";
	height: 0;
	width: 0;
	top: 2px;
}

/* Overall size of buttons controlled by this style
   border-width and margin-left should be the same. */
.upBtn:before, .dnBtn:before, .upManyBtn:before, .dnManyBtn:before {
	border-width: 6px;
	left: 50%;
	margin-left: -6px;
}

/* Thickness of up/down button lines controlled by this style.
   border-width and margin-left should be the same.
   Thickness = :before.border-width minus :after.border-width */
.upBtn:after, .dnBtn:after {
	border-width: 4px;
	left: 50%;
	margin-left: -4px;
}

/* See comment on .upBtn:after, .dnBtn:after */
.upManyBtn:after, .dnManyBtn:after {
	border-width: 3px;
	left: 50%;
	margin-left: -3px;
}

.dnBtn:after, .dnManyBtn:after {
        border-color: var(--text-primary) transparent transparent;
}

.dnBtn:before, .dnManyBtn:before {
        border-color: var(--surface-border-strong) transparent transparent;
}

.dnBtn.disabled:before, .dnManyBtn.disabled:before {
        border-color: var(--disabled-text) transparent transparent;
}

div.button div.tooltip {
	width: 100px;
}

/* Tooltip */

div.tooltip {
        display: none;
        padding: 2px 5px;
        border: 1px solid var(--surface-border-strong);
        position: absolute;
        box-shadow: 0 14px 26px rgba(0, 0, 0, 0.55);
        background: var(--surface-bg);
        color: var(--text-primary);
        border-radius: 8px;
        backdrop-filter: blur(4px);
        z-index: 999;
}

.tooltip.bottom {
	top: 30px;
}

.tooltip.right {
	left: 2px;
}

.tooltip.left {
	right: 0px;
}

.tooltip.top {
	bottom: 20px;
}

*:hover > div.tooltip {
	display: block;
}

div.tooltip:hover {
	display: none !important;
}

.disabled:hover > div.tooltip, .button.free:hover > div.tooltip {
	display: none;
}

#event .button.disabled:hover > div.tooltip {
	display: block;
}

/* Events */

.eventPanel {
        background: var(--surface-bg);
        border: 2px solid var(--surface-border-strong);
        left: 250px;
        padding: 20px;
        position: absolute;
        top: 90px;
        width: 335px;
        z-index: 20;
        color: var(--text-primary);
        border-radius: 18px;
        box-shadow: 0 24px 60px rgba(0, 0, 0, 0.55);
}

body.noMask .eventPanel {
        background-color: rgba(0, 0, 0, 0.85);
}

.eventPanel:before {
        background: radial-gradient(circle at 30% 20%, var(--theme-accent-soft) 0%, rgba(0, 0, 0, 0) 70%);
        opacity: 0.45;
        content: " ";
        height: 700px;
        left: -252px;
        position: absolute;
        top: -75px;
        width: 920px;
        z-index: -2;
}

body.noMask .eventPanel:before {
        opacity: 0;
}

.eventPanel:after {
        position: absolute;
        top: -2px;
        left: -2px;
        width: 100%;
        height: 100%;
        content: " ";
        border: 2px solid var(--surface-border-strong);
        box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.05), 0 18px 32px rgba(0, 0, 0, 0.45);
        border-radius: 18px;
        z-index: -2;
}

body.noMask .eventPanel:after {
        border-color: var(--surface-border-strong);
}

.eventPanel .button {
	float:left;
	margin-right: 20px;
}

body.noMask .eventPanel .button {
        border-color: var(--theme-accent-strong);
        color: var(--theme-accent-strong);
}

.eventTitle {
	display: inline-block;
	font-weight: bold;
	position: absolute;
	top: -12px;
}

body.noMask .eventTitle {
        color: var(--theme-accent-strong);
}

.eventTitle:after {
        background-color: var(--theme-accent);
        bottom: 32%;
        content: " ";
        height: 5px;
        left: 0;
        position: absolute;
        width: 100%;
        z-index: -1;
}

body.noMask .eventTitle:after {
        background-color: var(--surface-bg);
}

#description {
	position: relative;
	min-height: 100px;
}

#description textarea {
        width: 100%;
        height: 225px;
        background: rgba(0, 0, 0, 0.45);
        color: var(--text-primary);
        border: 1px solid var(--surface-border);
        border-radius: 12px;
        padding: 8px;
}

body.noMask #description {
        color: var(--text-primary);
}

#description > div {
	padding-bottom: 20px;
}

.take-all-button {
	float: none;
}

#buttons > .button {
	margin: 0 5px 5px;
	margin-right: 15px;
}

/* Combat! */
#description div.fighter {
	padding: 0px;
	position: absolute;
	bottom: 15px;
}

#wanderer {
	left: 25%;
}

#enemy {
	right: 25%;
}

.hp {
	position: absolute;
	top: -15px;
	margin-left: -50%;
}

.fighter.shield > .label::before {
	content: '(';
	position: absolute;
	left: -8px;
}

.fighter.shield > .label::after {
	content: ')';
	position: absolute;
	right: -8px;
}

.fighter.energised > .label {
	font-size: 2em;
	font-style: bold;
}

.fighter.meditation > .label {
	font-size: 1.5em;
	opacity: 0.3;
}

@keyframes exploding {
	0% { transform: translate(0, 0); }
	25% { transform: translate(-10px, 0); }
	75% { transform: translate(10px, 0); }
	100% { transform: translate(0, 0); }
}

.fighter.exploding > .label {
	animation: exploding 200ms linear infinite;
}

.fighter.venomous > .label {
	font-size: 1.5em;
	font-style: bold;
}

.fighter.enraged > .label {
	font-size: 1.5em;
	font-style: italic;
}

.fighter.boost > .label {
	font-style: italic;
}

#description .bullet {
	padding: 0px 20px 0px 20px;
	bottom: 25px;
	position: absolute;
	height: 1px;
	line-height: 1px;
}

.damageText {
	position: absolute;
	bottom: 15px;
	left: 50%;
	margin-left: -50%;
}

#lootButtons {
	padding-bottom: 0px !important;
	margin: 20px 0 5px 0;
	position: relative;
}

#lootButtons:before {
	content: attr(data-legend);
	position: absolute;
	top: -25px;
	left: 0px;
}

#dropMenu {
        background: var(--surface-bg);
        border: 1px solid var(--surface-border-strong);
        position: absolute;
        z-index: 100;
        padding-top: 5px;
        text-align: left;
        box-shadow: 0 16px 36px rgba(0, 0, 0, 0.55);
        cursor: default;
        border-radius: 12px;
        color: var(--text-primary);
}

#dropMenu:before {
        content: attr(data-legend);
        border-bottom: 1px solid var(--surface-border-strong);
        display: block;
        margin-bottom: 5px;
        padding: 0px 0px 5px 5px;
}

#dropMenu > div {
	padding: 0px 5px 5px 5px;
	cursor: pointer;
}

#dropMenu > div:hover {
	text-decoration: underline;
}

.outside-status {
  display: flex;
  gap: 12px;
  align-items: center;
  margin-bottom: 8px;
  font-size: 14px;
}

.outside-status-time,
.outside-status-weather {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.outside-shelter {
  margin-bottom: 12px;
}

.button .buttonLabel {
  display: inline-block;
  padding-right: 4px;
}
